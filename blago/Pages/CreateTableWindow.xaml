<Window x:Class="blago.Pages.CreateTableWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:blago.Pages"
        mc:Ignorable="d"
        Title="Создание новой таблицы"
        Height="500"
        Width="600"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        Background="{StaticResource BgDark}" WindowStyle="None">

    <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <TextBlock Grid.Row="0"
                   Text="Создание новой таблицы"
                   Style="{StaticResource TitleText}"
                   Margin="6 6 6 12"/>

        <StackPanel Grid.Row="1" Margin="6,0,6,0">
            <TextBlock Text="Название таблицы:" Style="{StaticResource CaptionText}"/>
            <TextBox x:Name="txtTableName"
                     Text="NewTable"
                     Style="{StaticResource InputBoxStyle}"
                     FontSize="14"/>
            <TextBlock Text="Примеры: Employees, Products, Orders"
                       Foreground="{StaticResource TextDim}"
                       FontSize="11" Margin="0,2,0,0"/>
        </StackPanel>

        <StackPanel Grid.Row="2" Margin="6,18,6,0">
            <TextBlock Text="Добавить столбец:" Style="{StaticResource CaptionText}" Margin="0,0,0,6"/>

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="2*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBox Grid.Column="0"
                         x:Name="txtColumnName"
                         Text="ColumnName"
                         Style="{StaticResource InputBoxStyle}"
                         Margin="0,0,8,0"/>

                <ComboBox Grid.Column="1"
                          x:Name="cmbDataType"
                          SelectedIndex="0"
                          Style="{StaticResource ComboBoxDark}">
                    <ComboBoxItem Content="int"/>
                    <ComboBoxItem Content="varchar(50)"/>
                    <ComboBoxItem Content="nvarchar(100)"/>
                    <ComboBoxItem Content="nvarchar(MAX)"/>
                    <ComboBoxItem Content="datetime"/>
                    <ComboBoxItem Content="date"/>
                    <ComboBoxItem Content="decimal(18,2)"/>
                    <ComboBoxItem Content="bit"/>
                    <ComboBoxItem Content="uniqueidentifier"/>
                </ComboBox>

                <Button Grid.Column="2"
                        Content="Добавить"
                        Width="90"
                        Click="AddColumn_Click"
                        Style="{StaticResource PrimaryButton}"
                        Margin="8,0,0,0"/>
            </Grid>

            <TextBlock Text="Столбцы таблицы:" Style="{StaticResource CaptionText}" Margin="0,12,0,6"/>

            <Border BorderBrush="{StaticResource InputBorder}"
                    BorderThickness="1"
                    CornerRadius="6"
                    Background="{StaticResource CardBg}"
                    Padding="6"
                    Height="250">
                <DataGrid x:Name="dgColumns"
                          AutoGenerateColumns="False"
                          CanUserAddRows="False"
                          CanUserDeleteRows="True"
                          CanUserReorderColumns="False"
                          CanUserResizeColumns="True"
                          CanUserSortColumns="True"
                          Style="{StaticResource ModernDataGrid}"
                          HeadersVisibility="Column"
                          RowHeaderWidth="0" Margin="0,0,0,80">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Имя столбца"
                                            Binding="{Binding ColumnName}"
                                            Width="*"/>
                        <DataGridTextColumn Header="Тип данных"
                                            Binding="{Binding DataType}"
                                            Width="*"/>
                        <DataGridCheckBoxColumn Header="NULL"
                                                Binding="{Binding AllowNull}"
                                                Width="60"/>
                        <DataGridCheckBoxColumn Header="ID"
                                                Binding="{Binding IsIdentity}"
                                                Width="60"/>
                        <DataGridCheckBoxColumn Header="PK"
                                                Binding="{Binding IsPrimaryKey}"
                                                Width="60"/>
                        <DataGridTemplateColumn Header="Действия" Width="100">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Content="Удалить"
                                            Click="DeleteColumn_Click"
                                            Style="{StaticResource DeleteButton}"
                                            Padding="6,2"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>
            </Border>
        </StackPanel>

        <StackPanel Grid.Row="3"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    Margin="0,12,6,0">
            <Button Content="Создать таблицу"
                    Click="CreateTable_Click"
                    Width="140"
                    Style="{StaticResource PrimaryButton}"/>

            <Button Content="Отмена"
                    Click="Cancel_Click"
                    Width="90"
                    Margin="10,0,0,0"
                    Style="{StaticResource SecondaryButton}"/>
        </StackPanel>
    </Grid>
</Window>
